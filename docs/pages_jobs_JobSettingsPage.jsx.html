<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: pages/jobs/JobSettingsPage.jsx</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: pages/jobs/JobSettingsPage.jsx</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>
import React, { useState } from 'react';
import Header from "../../components/UpperNavBar";
import { FiEdit2 } from "react-icons/fi";
import { useLocation, useNavigate } from 'react-router-dom';
import { IoCloseOutline } from "react-icons/io5";
import { FaPlus, FaCheck } from "react-icons/fa";
import { BsInfoCircleFill } from "react-icons/bs"; // Import info icon
import ScreeningQuestionCard from '../../components/jobs/ScreeningQuestionCard';
/**
 * JobSettingsPage component allows users to configure job settings such as screening questions, rejection settings, and applicant management.
 * 
 * @component
 * @example
 * // Example usage of JobSettingsPage
 * &lt;JobSettingsPage />
 */
export default function JobSettingsPage() {
    /**
     * Navigate function from react-router-dom to programmatically navigate to different routes.
     */
const navigate = useNavigate();
    /**
     * Location object from react-router-dom to access state and location data.
     */
const location = useLocation();
    /**
     * Final data passed from previous page via router state.
     * @type {Object}
     */
const finalData = location.state || {};
    /**
     * State representing the current page state.
     * @type {Object}
     */
const pageState= location.state ||{}
    /**
     * Job ID passed via router state.
     * @type {string}
     */
const jobId=location.state||""

    /**
     * State for tracking email updates in "Manage applicants" settings.
     * @type {string}
     */
const [emailUpdates, setEmailUpdates] = useState(finalData.user?.email);
    /**
     * State for holding job settings data, such as screening questions, rejection settings, and manage applicants settings.
     * @type {Array&lt;Object>}
     */
const [settings, setSettings] = useState([
{
title: "Screening questions",
description: "Have you completed the following level of education: Bachelor's Degree?",
sub: "Ideal answer: Yes",

        editableData: {
            questionText: "Have you completed the following level of education: Bachelor's Degree?", // This appears static in the image
            idealAnswer: "Yes", // This is editable
            isMustHave: true, // Checkbox state
        }
    },
    {
        title: "Rejection settings",
        description: "Enabled",
        sub: "Filter out and send rejections to applicants who donâ€™t provide ideal answers to must-have screening questions.",
        avatar: null,
        editableData: {
            enabled: true,
            message: "Thank you for applying. Unfortunately, you do not meet the required qualifications at this time."
        }
    },
    {
        title: "Manage applicants",
        description: "On LinkedIn",
        sub: `I'll send email updates to ${emailUpdates}`,
        avatar: null, // Keep avatar null if not used for this setting
         editableData: {
            emailUpdates: finalData.user?.email,
        }
    },
]);
    /**
     * State for tracking which setting is being edited.
     * @type {number|null}
     */
const [editingSettingIndex, setEditingSettingIndex] = useState(null); // State to track which setting is being edited
    /**
     * State for showing/hiding the add questions list.
     * @type {boolean}
     */
const [showAddQuestions, setShowAddQuestions] = useState(false); // State for showing/hiding add questions list

    /**
     * State for managing screening questions data.
     * @type {Array&lt;Object>}
     */
const [screeningQuestions, setScreeningQuestions] = useState([
    {
        id: "education", 
        type: "Education",
        data: {
            questionText: "Have you completed the following level of education: Bachelor's Degree?",
            idealAnswer: "Yes",
            isMustHave: true,
        }
    }
]);
    /**
     * Options for the types of screening questions that can be added.
     * @type {Array&lt;Object>}
     */
const questionOptions = [
    { id: "backgroundCheck", label: "Background Check", allowMultiple: false },
    { id: "driversLicense", label: "Driver's License", allowMultiple: false },
    { id: "drugTest", label: "Drug Test", allowMultiple: false },
    { id: "education", label: "Education", allowMultiple: false },
    { id: "expertiseSkill", label: "Expertise with Skill", allowMultiple: true },
    { id: "hybridWork", label: "Hybrid Work", allowMultiple: false },
    { id: "industryExperience", label: "Industry Experience", allowMultiple: true },
    { id: "language", label: "Language", allowMultiple: true },
    { id: "location", label: "Location", allowMultiple: true },
    { id: "onsiteWork", label: "Onsite Work", allowMultiple: false },
    { id: "remoteWork", label: "Remote Work", allowMultiple: false },
    { id: "urgentHiring", label: "Urgent Hiring Need", allowMultiple: false },
    { id: "visaStatus", label: "Visa Status", allowMultiple: false },
    { id: "workAuthorization", label: "Work Authorization", allowMultiple: false },
    { id: "workExperience", label: "Work Experience", allowMultiple: true },
    { id: "customQuestion", label: "Custom Question", allowMultiple: true },
];
    /**
     * Navigates back to the previous page.
     */
const handleGoBack = () => navigate(-1);
    /**
     * Handles navigating to the review page with job settings data.
     */
const handleContinue = () => {
    const rejectionSettings = settings.find(s => s.title === "Rejection settings");
console.log("job settings screenig questions:", screeningQuestions); // Debugging line to check screening questions

    navigate('/review', {
        state: {
            screeningQuestions,
            rejectionSettings: rejectionSettings ? rejectionSettings.editableData : null,
            finalData, 
            pageState,
            jobId,
            emailUpdates
        },
    });
};
    /**
     * Sets the index of the setting being edited.
     * @param {number} index - Index of the setting to edit.
     */
const handleEditClick = (index) => {
    setEditingSettingIndex(index);
};

    /**
     * Cancels the editing of screening questions and resets state.
     */
// Handlers specific to Screening Questions Edit
const handleCancelScreeningEdit = () => {
    setEditingSettingIndex(null); 
    setShowAddQuestions(false); 
    
};

    /**
     * Toggles the visibility of the add screening questions list.
     */
const handleAddQuestionClick = () => {
    setShowAddQuestions(!showAddQuestions);
};
    /**
     * Updates the screening question with the given id.
     * @param {string} id - The id of the question to update.
     * @param {Object} newData - The new data for the question.
     */
const updateScreeningQuestion = (id, newData) => {
    setScreeningQuestions(prev =>
        prev.map((q) => (q.id === id ? { ...q, data: newData } : q))
    );
};
    /**
     * Removes the screening question with the specified id.
     * @param {string} id - The id of the question to remove.
     */
const handleRemoveQuestion = (id) => {
    setScreeningQuestions((prev) => prev.filter((q) => q.id !== id));
};

    /**
     * Adds a new screening question based on the selected option.
     * @param {Object} option - The selected question option.
     */
const handleQuestionSelect = (option) => {
    const alreadyAdded = screeningQuestions.find(q => q.id === option.id);

    if (!alreadyAdded || option.allowMultiple) {
        const uniqueId = option.allowMultiple ? `${option.id}-${Date.now()}` : option.id;
        setScreeningQuestions(prev => [
            ...prev,
            { id: uniqueId, type: option.label, data: {} } // Initial empty data for the new question
        ]);
    }
};
    /**
     * Determines if a question option is disabled based on the current questions.
     * @param {Object} option - The question option to check.
     * @returns {boolean} - Whether the option is disabled.
     */

const isQuestionDisabled = (option) => {
    // Check if a question with this original ID (not the unique instance ID) already exists and doesn't allow multiple
    const alreadyAdded = screeningQuestions.find(q => q.id.startsWith(`${option.id}-`) ? false : q.id === option.id); // Adjust check for unique IDs
    return alreadyAdded &amp;&amp; !option.allowMultiple;
};

    /**
     * Cancels the editing of the "Manage applicants" settings.
     */
// Handlers specific to Manage Applicants Edit
const handleCancelManageApplicantsEdit = () => {
    setEditingSettingIndex(null); // Exit editing mode
    
};
    /**
     * Updates the email for applicant updates in the "Manage applicants" settings.
     * @param {Event} e - The change event of the email input.
     */
const handleEmailUpdatesChange = (e) => {
    const newSettings = [...settings];
    const manageSetting = newSettings.find(s => s.title === "Manage applicants");
    if (manageSetting &amp;&amp; manageSetting.editableData) {
        manageSetting.editableData.emailUpdates = e.target.value;
        setSettings(newSettings);
        setEmailUpdates(e.target.value); 
    }
};

    /**
     * Renders the editing view for screening questions.
     * @param {Object} setting - The setting being edited.
     * @returns {JSX.Element} - The JSX for rendering the screening questions edit view.
     */

// Render the editing view for Screening Questions
const renderScreeningQuestionsEdit = (setting) => (
    &lt;div className="bg-white rounded-lg shadow p-6 space-y-4 border border-gray-200">
        &lt;div className="flex justify-between items-center">
            &lt;h3 className="text-lg font-semibold text-gray-800">Screening questions&lt;/h3>
            &lt;button
                onClick={handleCancelScreeningEdit}
                className="text-gray-500 hover:text-gray-700 text-sm font-medium"
            >
                Cancel
            &lt;/button>
        &lt;/div>
        &lt;p className="text-sm text-gray-600">
            We recommend adding 3 or more questions. Applicants must answer each question.
        &lt;/p>

         {/* Render added questions */}
         {screeningQuestions.map((question) => (
             &lt;div key={question.id} className="mt-4">
                 &lt;ScreeningQuestionCard
                     questionType={question.type}
                     data={question.data}
                     onChange={(newData) => updateScreeningQuestion(question.id, newData)}
                     onRemove={() => handleRemoveQuestion(question.id)} // Use question.id for remove
                 />
             &lt;/div>
         ))}

        {/* Add Screening Questions Button and Options */}
        &lt;button
            onClick={handleAddQuestionClick}
            className="flex items-center text-blue-700 hover:underline text-sm font-medium mt-4"
        >
            &lt;span className="text-lg mr-1">{showAddQuestions ? "-" : "+"}&lt;/span> Add screening questions
        &lt;/button>

        {showAddQuestions &amp;&amp; (
            &lt;div className="grid grid-cols-2 md:grid-cols-3 gap-3 mt-4">
                {questionOptions.map(option => {
                    const disabled = isQuestionDisabled(option);
                    return (
                        &lt;button
                            key={option.id}
                            onClick={() => handleQuestionSelect(option)}
                            disabled={disabled}
                            className={`flex items-center justify-center px-3 py-2 border rounded-full text-sm font-medium transition
                                ${disabled ? 'bg-gray-200 text-gray-500 cursor-not-allowed' : 'bg-white text-gray-700 hover:bg-gray-100'}
                            `}
                        >
                            {disabled ? &lt;FaCheck className="mr-2 text-green-600" /> : &lt;FaPlus className="mr-2" />}
                            {option.label}
                        &lt;/button>
                    );
                })}
            &lt;/div>
        )}
    &lt;/div>
);
    /**
     * Renders the editing view for rejection settings.
     * @param {Object} setting - The rejection setting being edited.
     * @returns {JSX.Element} - The JSX for rendering the rejection settings edit view.
     */
// Render the editing view for Rejection Settings
const renderRejectionSettingsEdit = (setting) => (
    &lt;div className="bg-white rounded-lg shadow p-6 space-y-4 border border-gray-200">
        &lt;div className="flex justify-between items-center">
            &lt;h3 className="text-lg font-semibold text-gray-800">Rejection settings&lt;/h3>
            &lt;button
                onClick={() => setEditingSettingIndex(null)}
                className="text-gray-500 hover:text-gray-700 text-sm font-medium"
            >
                Cancel
            &lt;/button>
        &lt;/div>

        &lt;div className="flex items-start space-x-2">
            &lt;input
                type="checkbox"
                checked={setting.editableData.enabled}
                onChange={(e) => {
                    const newSettings = [...settings];
                    newSettings[editingSettingIndex].editableData.enabled = e.target.checked;
                    setSettings(newSettings);
                }}
                className="mt-1 h-4 w-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"
            />
            &lt;label className="text-gray-700 text-sm flex-1">
                Filter out and send rejections to applicants who donâ€™t meet any must-have qualifications.
            &lt;/label>
        &lt;/div>

        &lt;div className="space-y-1">
            &lt;label className="text-gray-700 text-sm font-medium">Preview*&lt;/label>
            &lt;textarea
                value={setting.editableData.message}
                onChange={(e) => {
                    const newSettings = [...settings];
                    newSettings[editingSettingIndex].editableData.message = e.target.value;
                    setSettings(newSettings);
                }}
                className="w-full border border-gray-300 rounded-md p-2 text-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"
                rows={6}
                maxLength={3000}
            />
            &lt;div className="text-right text-xs text-gray-500">
                {setting.editableData.message.length}/3,000
            &lt;/div>
        &lt;/div>
    &lt;/div>
);


    /**
     * Renders the editing view for manage applicants settings.
     * @param {Object} setting - The manage applicants setting being edited.
     * @returns {JSX.Element} - The JSX for rendering the manage applicants edit view.
     */
 // Render the editing view for Manage Applicants
 const renderManageApplicantsEdit = (setting) => (
    &lt;div className="bg-white rounded-lg shadow p-6 space-y-4 border border-gray-200">
        &lt;div className="flex justify-between items-center">
            &lt;h3 className="text-lg font-semibold text-gray-800 flex items-center"> 
                Manage applicants
                 &lt;BsInfoCircleFill className="ml-2 h-4 w-4 text-gray-400" /> 
            &lt;/h3>
            &lt;button
                onClick={handleCancelManageApplicantsEdit}
                className="text-gray-500 hover:text-gray-700 text-sm font-medium"
            >
                Cancel
            &lt;/button>
        &lt;/div>

        &lt;div className="grid grid-cols-1 md:grid-cols-2 gap-4"> {/* Use grid for layout */}
            {/* Manage applicants dropdown */}
            &lt;div>
                &lt;label htmlFor="manageApplicantsOption" className="block text-sm font-medium text-gray-700 mb-1">Manage applicants&lt;/label>
                &lt;p
                    id="manageApplicantsOption"
                    className="mt-1 block w-full px-3 py-2 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"
                >
                    On LinkedIn
                    
                &lt;/p>
            &lt;/div>

            {/* Email for applicant updates input */}
            &lt;div>
                 &lt;label htmlFor="emailUpdates" className="block text-sm font-medium text-gray-700 mb-1">Email for applicant updates&lt;span className="text-red-500">*&lt;/span>&lt;/label>
                 &lt;input
                     type="email"
                     id="emailUpdates"
                     value={setting.editableData.emailUpdates}
                     onChange={handleEmailUpdatesChange}
                     className="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"
                     placeholder="Enter email"
                 />
            &lt;/div>
        &lt;/div>
    &lt;/div>
);

const renderStaticSetting = (setting, index) => (
    &lt;div className="flex justify-between items-start gap-4 border-b border-gray-200 pb-6 last:border-none last:pb-0">
        &lt;div className="min-w-[150px] font-medium text-gray-800">{setting.title}&lt;/div>

        &lt;div className="flex-1 space-y-1">
            &lt;div className="flex items-center gap-2">
                {setting.avatar &amp;&amp; (
                    &lt;img src={setting.avatar} alt="Avatar" className="w-6 h-6 rounded-full object-cover" />
                )}
                &lt;p className="text-gray-700">{setting.description}&lt;/p>
            &lt;/div>
            &lt;p className="text-gray-500 text-sm">{setting.sub}&lt;/p>
        &lt;/div>

        &lt;button
            className="text-gray-500 hover:text-gray-700"
            onClick={() => handleEditClick(index)} // Pass the index to the handler
            aria-label={`Edit ${setting.title}`}
        >
            &lt;FiEdit2 size={18} />
        &lt;/button>
    &lt;/div>
);

return (
    &lt;>
        &lt;Header />
        &lt;div className="min-h-screen bg-[#f4f2ee] py-12 md:py-20 px-4 sm:px-6 lg:px-8 flex justify-center">
            &lt;div className="w-full max-w-3xl space-y-6">
                {/* Page Title */}
                &lt;h1 className="text-2xl md:text-3xl font-semibold text-gray-800">
                    Confirm your screening questions and job settings
                &lt;/h1>

                {/* Job Settings Card */}
                &lt;div className="bg-white rounded-lg shadow p-6 md:p-8 space-y-8">
                    &lt;div>
                        &lt;h2 className="text-xl md:text-2xl font-bold text-gray-800">Job settings&lt;/h2>
                        &lt;p className="text-sm text-gray-600 mt-1">
                            Your settings control how you screen and collect applicants.
                        &lt;/p>
                    &lt;/div>

                    {/* Settings List */}
                    &lt;div className="space-y-6">
                        {settings.map((setting, index) => (
                            &lt;div key={index}> 
                                
                                {editingSettingIndex === index &amp;&amp; setting.title === "Screening questions" ?
                                    renderScreeningQuestionsEdit(setting)
                                    : editingSettingIndex === index &amp;&amp; setting.title === "Rejection settings" ?
                                    renderRejectionSettingsEdit(setting)      
                                    : editingSettingIndex === index &amp;&amp; setting.title === "Manage applicants" ?
                                    renderManageApplicantsEdit(setting)
                                    :
                                    renderStaticSetting(setting, index)
                                }
                            &lt;/div>
                        ))}
                    &lt;/div>

                    {/* Action Buttons */}
                    &lt;div className="flex justify-between pt-6">
                        &lt;button
                            onClick={handleGoBack}
                            className="py-2 px-5 border border-gray-300 rounded-full text-sm font-semibold text-gray-700 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-400 transition ease-in-out"
                        >
                            Back
                        &lt;/button>
                        &lt;button
                            onClick={handleContinue}
                            className="py-2 px-6 border border-transparent rounded-full text-sm font-semibold text-white bg-[#0a66c2] hover:bg-[#004182] focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#004182] transition ease-in-out"
                        >
                            Continue
                        &lt;/button>
                    &lt;/div>
                &lt;/div>
            &lt;/div>
        &lt;/div>
    &lt;/>
);

}
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Global</h3><ul><li><a href="global.html#ChatWindow">ChatWindow</a></li><li><a href="global.html#CommentSection">CommentSection</a></li><li><a href="global.html#ConversationListItem">ConversationListItem</a></li><li><a href="global.html#ConversationSearch">ConversationSearch</a></li><li><a href="global.html#CreatePostModal">CreatePostModal</a></li><li><a href="global.html#Header">Header</a></li><li><a href="global.html#HirePage">HirePage</a></li><li><a href="global.html#JobBoardPage">JobBoardPage</a></li><li><a href="global.html#JobDetails">JobDetails</a></li><li><a href="global.html#Jobs">Jobs</a></li><li><a href="global.html#Main">Main</a></li><li><a href="global.html#ManageJob">ManageJob</a></li><li><a href="global.html#MyJobs">MyJobs</a></li><li><a href="global.html#Notification">Notification</a></li><li><a href="global.html#NotificationCard">NotificationCard</a></li><li><a href="global.html#PostMenu">PostMenu</a></li><li><a href="global.html#PostReactions">PostReactions</a></li><li><a href="global.html#ScreeningQuestionCard">ScreeningQuestionCard</a></li><li><a href="global.html#debounce">debounce</a></li><li><a href="global.html#fetchComments">fetchComments</a></li><li><a href="global.html#fetchNotifications">fetchNotifications</a></li><li><a href="global.html#fetchPosts">fetchPosts</a></li><li><a href="global.html#fetchUser">fetchUser</a></li><li><a href="global.html#filteredNotifications">filteredNotifications</a></li><li><a href="global.html#getReactionIcon">getReactionIcon</a></li><li><a href="global.html#handleAddComment">handleAddComment</a></li><li><a href="global.html#handleBlockUser">handleBlockUser</a></li><li><a href="global.html#handleClick">handleClick</a></li><li><a href="global.html#handleCreatePost">handleCreatePost</a></li><li><a href="global.html#handleDeleteNotification">handleDeleteNotification</a></li><li><a href="global.html#handleLikeClick">handleLikeClick</a></li><li><a href="global.html#handleMainFilterChange">handleMainFilterChange</a></li><li><a href="global.html#handleMuteDuration">handleMuteDuration</a></li><li><a href="global.html#handleNotificationClick">handleNotificationClick</a></li><li><a href="global.html#handleReact">handleReact</a></li><li><a href="global.html#handleReactToComment">handleReactToComment</a></li><li><a href="global.html#handleReportPost">handleReportPost</a></li><li><a href="global.html#handleSavePost">handleSavePost</a></li><li><a href="global.html#handleSendTestNotification">handleSendTestNotification</a></li><li><a href="global.html#handleSubmit">handleSubmit</a></li><li><a href="global.html#requestOTP">requestOTP</a></li><li><a href="global.html#sendMessage">sendMessage</a></li><li><a href="global.html#toggleComments">toggleComments</a></li><li><a href="global.html#verifyOTP">verifyOTP</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.4</a> on Fri May 02 2025 17:16:34 GMT+0300 (Eastern European Summer Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
